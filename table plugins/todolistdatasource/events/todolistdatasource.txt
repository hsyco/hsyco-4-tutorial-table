INIT : {
    var dbConn = java.sql.DriverManager.getConnection("jdbc:hsqldb:file:data/hsyco;hsqldb.write_delay_millis=100;hsqldb.log_data=false;hsqldb.lock_file=false", "hsyco", "9h6s2y5c17o");
    dbConn.setAutoCommit(true);

    if (!databaseExecuteStatement(dbConn, "set database sql unique nulls false")) {
        errorLog("STARTUP ERROR: TODOLIST DATABASE: Failed to execute: set database sql unique nulls false");
    }

    if (databaseExecuteStatement(dbConn, "create table todolist (id integer generated by default as identity (start with 1) primary key, date date not null, time time not null, info varchar_ignorecase(256) not null)")) {
        messageLog("TABLE todolist created");
    }
    dataSourceSQL("db_todolist", "todolist", "id", dbConn);
}

function userCommand(session, userid, name, param) : {
    if(name == "cleardb"){
        if(!databaseExecuteStatement(dbConn, "DELETE FROM todolist")){
            errorLog("USERCOMMAND ERROR: TODOLIST DATABASE: Failed to execute: DELETE FROM todolist");
        }
        dataSourceOption("db_todolist", "touch", "db_todolist");
        return "ok";
    }
    
}
